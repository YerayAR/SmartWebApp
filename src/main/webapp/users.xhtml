<!DOCTYPE html>
<!-- Vista que muestra el listado de usuarios y un formulario de alta -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="https://jakarta.ee/xml/ns/jakartaee"
      xmlns:f="https://jakarta.ee/xml/ns/jakartaee">
<h:head>
    <title>SmartWebApp - Usuarios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-section { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .data-table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        .data-table th, .data-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .data-table th { background-color: #4CAF50; color: white; }
        .form-field { margin: 5px 0; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .form-field label { width: 100px; }
        .btn { background-color: #4CAF50; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; }
        .btn:hover { background-color: #45a049; }
        .navigation { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .navigation a { text-decoration: none; color: #4CAF50; }
        .table-container { overflow-x: auto; }
        @media (max-width: 768px) {
            .form-field { flex-direction: column; align-items: stretch; }
            .form-field label { width: auto; margin-bottom: 5px; }
            .navigation { flex-direction: column; }
        }
    </style>
</h:head>
<h:body>
    <div class="navigation">
        <h:link value="← Volver al Inicio" outcome="index"/>
        <h:link value="Gestión de Tareas" outcome="tasks"/>
    </div>
    
    <h1>Gestión de Usuarios</h1>
    
    <div class="form-section">
        <h2>Añadir Nuevo Usuario</h2>
        <h:form>
            <div class="form-field">
                <h:outputLabel value="Nombre:" for="name"/>
                <h:inputText id="name" value="#{userBean.user.name}" required="true" requiredMessage="El nombre es obligatorio"/>
            </div>
            <div class="form-field">
                <h:commandButton value="Añadir Usuario" action="#{userBean.save}" styleClass="btn"/>
            </div>
            <h:messages style="color: red;"/>
        </h:form>
    </div>
    
    <h2>Lista de Usuarios</h2>
    <div class="table-container">
        <h:dataTable value="#{userBean.users}" var="u" styleClass="data-table" rendered="#{not empty userBean.users}">
            <h:column>
                <f:facet name="header">ID</f:facet>
                #{u.id}
            </h:column>
            <h:column>
                <f:facet name="header">Nombre</f:facet>
                #{u.name}
            </h:column>
        </h:dataTable>
    </div>
    
    <h:panelGroup rendered="#{empty userBean.users}">
        <p>No hay usuarios registrados.</p>
    </h:panelGroup>
</h:body>
</html>
